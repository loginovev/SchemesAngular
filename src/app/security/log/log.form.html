<p-panel [header]="'LOG-FORM.TITLE' | translate">

  <p-dataTable
    [value]="logs"
    [(first)] = "first"
    [lazy]="true"
    [(totalRecords)] = "totalRecords"
    paginator="true" [rows]="10" [rowsPerPageOptions]="[10,20,50]"
    scrollable="true" scrollHeight="100px"
    reorderableColumns="true"
    resizableColumns="true"
    expandableRows="true"
    (onLazyLoad)="ngOnLazyLoad($event)"
  >
    <p-column expander="true" styleClass="col-icon" [style]="{'width':'40px'}"></p-column>
    <p-column field="date" [header]="'LOG-FORM.DATE' | translate" [sortable]="true" [filter]="true" filterMatchMode="startWith" [style]="{'width':'260px'}">
      <ng-template pTemplate="filter" >
        <p-calendar (onSelect)="dateFilterSelect($event)" (onClearClick)="dateClearClick()" dateFormat="yy-mm-dd" readonlyInput="true" showIcon="true" showButtonBar="true" dataType="string" [style]=" {'width':'100%' }" styleClass="ui-column-filter" ></p-calendar>
      </ng-template>
    </p-column>
    <p-column field="messageType" [header]="'LOG-FORM.MESSAGETYPE' | translate" [sortable]="true" [filter]="true" filterMatchMode="equals">
      <ng-template pTemplate="filter">
        <p-dropdown [options]="messageType" [style]="{'width':'100%'}" (onChange)="messageTypeOnChange($event)" styleClass="ui-column-filter"></p-dropdown>
      </ng-template>
    </p-column>
    <p-column field="username" [header]="'LOG-FORM.USERNAME' | translate" [sortable]="true">
      <ng-template pTemplate="filter">
        <p-dropdown [options]="username" [style]="{'width':'100%'}" (onChange)="usernameOnChange($event)" styleClass="ui-column-filter"></p-dropdown>
      </ng-template>
    </p-column>
    <p-column field="event" [header]="'LOG-FORM.EVENT' | translate" [sortable]="true">
      <ng-template pTemplate="filter">
        <p-dropdown [options]="event" [style]="{'width':'100%'}" (onChange)="eventOnChange($event)" styleClass="ui-column-filter"></p-dropdown>
      </ng-template>
    </p-column>
    <p-column field="structure" [header]="'LOG-FORM.STRUCTURE' | translate" [sortable]="true">
      <ng-template pTemplate="filter">
        <p-dropdown [options]="structure" [style]="{'width':'100%'}" (onChange)="structureOnChange($event)" styleClass="ui-column-filter"></p-dropdown>
      </ng-template>
    </p-column>

    <ng-template let-log pTemplate="rowexpansion">
      <div class="ui-grid ui-grid-responsive ui-fluid" style="font-size:16px;padding:20px">
        <div class="ui-grid-col-9">
          <div class="ui-grid ui-grid-responsive ui-grid-pad">
            <div class="ui-grid-row">
              <div class="ui-grid-col-2 label">{{'LOG-FORM.DATA' | translate}}:</div>
              <div class="ui-grid-col-10">{{log.data}}</div>
            </div>
            <div class="ui-grid-row">
              <div class="ui-grid-col-2 label">{{'LOG-FORM.MESSAGE' | translate}}:</div>
              <div class="ui-grid-col-10">{{log.message}}</div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>

  </p-dataTable>
</p-panel>

<p-growl [(value)]="msgs"></p-growl>
